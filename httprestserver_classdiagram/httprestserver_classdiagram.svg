<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1121px" preserveAspectRatio="none" style="width:1766px;height:1121px;" version="1.1" viewBox="0 0 1766 1121" width="1766px" zoomAndPan="magnify"><defs><filter height="300%" id="f1mjqub1o0a8wu" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[d621a1cf36efacd102423184f657d5e8]
class BaseHTTPServer--><rect codeLine="1" fill="#FEFECE" filter="url(#f1mjqub1o0a8wu)" height="176.0469" id="BaseHTTPServer" style="stroke: #A80036; stroke-width: 1.5;" width="368" x="984.5" y="128"/><ellipse cx="1113.25" cy="144" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1116.2188,149.6406 Q1115.6406,149.9375 1115,150.0781 Q1114.3594,150.2344 1113.6563,150.2344 Q1111.1563,150.2344 1109.8281,148.5938 Q1108.5156,146.9375 1108.5156,143.8125 Q1108.5156,140.6875 1109.8281,139.0313 Q1111.1563,137.375 1113.6563,137.375 Q1114.3594,137.375 1115,137.5313 Q1115.6563,137.6875 1116.2188,137.9844 L1116.2188,140.7031 Q1115.5938,140.125 1115,139.8594 Q1114.4063,139.5781 1113.7813,139.5781 Q1112.4375,139.5781 1111.75,140.6563 Q1111.0625,141.7188 1111.0625,143.8125 Q1111.0625,145.9063 1111.75,146.9844 Q1112.4375,148.0469 1113.7813,148.0469 Q1114.4063,148.0469 1115,147.7813 Q1115.5938,147.5 1116.2188,146.9219 L1116.2188,149.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="102" x="1133.75" y="148.1543">BaseHTTPServer</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="985.5" x2="1351.5" y1="160" y2="160"/><ellipse cx="995.5" cy="171" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="121" x="1004.5" y="174.2104">const string VERSION</text><ellipse cx="995.5" cy="183.8047" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="103" x="1004.5" y="187.0151">const string NAME</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="992.5" y="193.6094"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="41" x="1004.5" y="199.8198">int port</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="992.5" y="206.4141"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="71" x="1004.5" y="212.6245">bool running</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="992.5" y="219.2188"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="113" x="1004.5" y="225.4292">TcpListener listener</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="992.5" y="232.0234"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="342" x="1004.5" y="238.2339">List&lt;IResourceEndpointHandler&gt; resourceEndpointHandlers</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="985.5" x2="1351.5" y1="244.8281" y2="244.8281"/><ellipse cx="995.5" cy="255.8281" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="145" x="1004.5" y="259.0386">BaseHTTPServer(int port)</text><ellipse cx="995.5" cy="268.6328" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="63" x="1004.5" y="271.8433">void Start()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="992.5" y="278.4375"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="56" x="1004.5" y="284.6479">void Run()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="992.5" y="291.2422"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="192" x="1004.5" y="297.4526">void HandleClient(TcpClient client)</text><!--MD5=[496b068da06cd131afb585115329e858]
class IHTTPServer--><rect codeLine="92" fill="#FEFECE" filter="url(#f1mjqub1o0a8wu)" height="60.8047" id="IHTTPServer" style="stroke: #A80036; stroke-width: 1.5;" width="106" x="1115.5" y="7"/><ellipse cx="1130.5" cy="23" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1126.4219,18.7656 L1126.4219,16.6094 L1133.8125,16.6094 L1133.8125,18.7656 L1131.3438,18.7656 L1131.3438,26.8438 L1133.8125,26.8438 L1133.8125,29 L1126.4219,29 L1126.4219,26.8438 L1128.8906,26.8438 L1128.8906,18.7656 L1126.4219,18.7656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="74" x="1144.5" y="27.1543">IHTTPServer</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1116.5" x2="1220.5" y1="39" y2="39"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1116.5" x2="1220.5" y1="47" y2="47"/><ellipse cx="1126.5" cy="58" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="63" x="1135.5" y="61.2104">void Start()</text><!--MD5=[68efced5630f6877a792fbf4b1d46ff2]
class RequestContext--><rect codeLine="15" fill="#FEFECE" filter="url(#f1mjqub1o0a8wu)" height="163.2422" id="RequestContext" style="stroke: #A80036; stroke-width: 1.5;" width="357" x="7" y="759.5"/><ellipse cx="131.25" cy="775.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M134.2188,781.1406 Q133.6406,781.4375 133,781.5781 Q132.3594,781.7344 131.6563,781.7344 Q129.1563,781.7344 127.8281,780.0938 Q126.5156,778.4375 126.5156,775.3125 Q126.5156,772.1875 127.8281,770.5313 Q129.1563,768.875 131.6563,768.875 Q132.3594,768.875 133,769.0313 Q133.6563,769.1875 134.2188,769.4844 L134.2188,772.2031 Q133.5938,771.625 133,771.3594 Q132.4063,771.0781 131.7813,771.0781 Q130.4375,771.0781 129.75,772.1563 Q129.0625,773.2188 129.0625,775.3125 Q129.0625,777.4063 129.75,778.4844 Q130.4375,779.5469 131.7813,779.5469 Q132.4063,779.5469 133,779.2813 Q133.5938,779 134.2188,778.4219 L134.2188,781.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="100" x="151.75" y="779.6543">RequestContext</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="8" x2="363" y1="791.5" y2="791.5"/><ellipse cx="18" cy="802.5" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="127" x="27" y="805.7104">String Type {get;set;}</text><ellipse cx="18" cy="815.3047" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="121" x="27" y="818.5151">String URL {get;set;}</text><ellipse cx="18" cy="828.1094" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="172" x="27" y="831.3198">String HTTPVersion {get;set;}</text><ellipse cx="18" cy="840.9141" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="303" x="27" y="844.1245">List&lt;HttpHeaderPair&gt; HeaderPairs {get;private set;}</text><ellipse cx="18" cy="853.7188" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="128" x="27" y="856.9292">String Body {get;set;}</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="8" x2="363" y1="863.5234" y2="863.5234"/><ellipse cx="18" cy="874.5234" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="198" x="27" y="877.7339">void AddHeader(String headerLine)</text><ellipse cx="18" cy="887.3281" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="313" x="27" y="890.5386">static RequestContext GetBaseRequest(String request)</text><ellipse cx="18" cy="900.1328" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="144" x="27" y="903.3433">override string ToString()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="15" y="909.9375"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="331" x="27" y="916.1479">RequestContext(String type, String url, String httpVersion)</text><!--MD5=[677561f5d4a6bdd391d5d93a52324b49]
class HttpHeaderPair--><rect codeLine="28" fill="#FEFECE" filter="url(#f1mjqub1o0a8wu)" height="99.2188" id="HttpHeaderPair" style="stroke: #A80036; stroke-width: 1.5;" width="335" x="686" y="1008"/><ellipse cx="800.75" cy="1024" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M803.7188,1029.6406 Q803.1406,1029.9375 802.5,1030.0781 Q801.8594,1030.2344 801.1563,1030.2344 Q798.6563,1030.2344 797.3281,1028.5938 Q796.0156,1026.9375 796.0156,1023.8125 Q796.0156,1020.6875 797.3281,1019.0313 Q798.6563,1017.375 801.1563,1017.375 Q801.8594,1017.375 802.5,1017.5313 Q803.1563,1017.6875 803.7188,1017.9844 L803.7188,1020.7031 Q803.0938,1020.125 802.5,1019.8594 Q801.9063,1019.5781 801.2813,1019.5781 Q799.9375,1019.5781 799.25,1020.6563 Q798.5625,1021.7188 798.5625,1023.8125 Q798.5625,1025.9063 799.25,1026.9844 Q799.9375,1028.0469 801.2813,1028.0469 Q801.9063,1028.0469 802.5,1027.7813 Q803.0938,1027.5 803.7188,1026.9219 L803.7188,1029.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="97" x="821.25" y="1028.1543">HttpHeaderPair</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="687" x2="1020" y1="1040" y2="1040"/><ellipse cx="697" cy="1051" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="161" x="706" y="1054.2104">String HeaderKey {get;set;}</text><ellipse cx="697" cy="1063.8047" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="172" x="706" y="1067.0151">String HeaderValue {get;set;}</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="687" x2="1020" y1="1073.6094" y2="1073.6094"/><ellipse cx="697" cy="1084.6094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="309" x="706" y="1087.8198">HttpHeaderPair(String headerKey, String headerValue)</text><ellipse cx="697" cy="1097.4141" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="144" x="706" y="1100.6245">override string ToString()</text><!--MD5=[b937ea1e5ddaf966c75792a5554ec602]
class IResourceEndpointHandler--><rect codeLine="36" fill="#FEFECE" filter="url(#f1mjqub1o0a8wu)" height="73.6094" id="IResourceEndpointHandler" style="stroke: #A80036; stroke-width: 1.5;" width="354" x="991.5" y="383"/><ellipse cx="1080.75" cy="399" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1076.6719,394.7656 L1076.6719,392.6094 L1084.0625,392.6094 L1084.0625,394.7656 L1081.5938,394.7656 L1081.5938,402.8438 L1084.0625,402.8438 L1084.0625,405 L1076.6719,405 L1076.6719,402.8438 L1079.1406,402.8438 L1079.1406,394.7656 L1076.6719,394.7656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="167" x="1101.25" y="403.1543">IResourceEndpointHandler</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="992.5" x2="1344.5" y1="415" y2="415"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="992.5" x2="1344.5" y1="423" y2="423"/><ellipse cx="1002.5" cy="434" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="328" x="1011.5" y="437.2104">bool CheckResponsibility(RequestContext requestContext)</text><ellipse cx="1002.5" cy="446.8047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="300" x="1011.5" y="450.0151">void HandleRequest(RequestContext requestContext)</text><!--MD5=[69aa3d4358c8cfb7789bd1ad26a563d6]
class ICRUDHandler--><rect codeLine="41" fill="#FEFECE" filter="url(#f1mjqub1o0a8wu)" height="112.0234" id="ICRUDHandler" style="stroke: #A80036; stroke-width: 1.5;" width="512" x="444.5" y="364"/><ellipse cx="652.75" cy="380" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M648.6719,375.7656 L648.6719,373.6094 L656.0625,373.6094 L656.0625,375.7656 L653.5938,375.7656 L653.5938,383.8438 L656.0625,383.8438 L656.0625,386 L648.6719,386 L648.6719,383.8438 L651.1406,383.8438 L651.1406,375.7656 L648.6719,375.7656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="87" x="673.25" y="384.1543">ICRUDHandler</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="445.5" x2="955.5" y1="396" y2="396"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="445.5" x2="955.5" y1="404" y2="404"/><ellipse cx="455.5" cy="415" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="466" x="464.5" y="418.2104">void ListHandler(RequestContext requestContext, NetworkStream networkStream)</text><ellipse cx="455.5" cy="427.8047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="484" x="464.5" y="431.0151">void CreateHandler(RequestContext requestContext, NetworkStream networkStream)</text><ellipse cx="455.5" cy="440.6094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="474" x="464.5" y="443.8198">void ReadHandler(RequestContext requestContext, NetworkStream networkStream)</text><ellipse cx="455.5" cy="453.4141" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="486" x="464.5" y="456.6245">void UpdateHandler(RequestContext requestContext, NetworkStream networkStream)</text><ellipse cx="455.5" cy="466.2188" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="482" x="464.5" y="469.4292">void DeleteHandler(RequestContext requestContext, NetworkStream networkStream)</text><!--MD5=[a376f80f529380c08341def9a9715ac8]
class MessageResourceEndpointHandler--><rect codeLine="49" fill="#FEFECE" filter="url(#f1mjqub1o0a8wu)" height="137.6328" id="MessageResourceEndpointHandler" style="stroke: #A80036; stroke-width: 1.5;" width="533" x="668" y="536"/><ellipse cx="820.25" cy="552" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M823.2188,557.6406 Q822.6406,557.9375 822,558.0781 Q821.3594,558.2344 820.6563,558.2344 Q818.1563,558.2344 816.8281,556.5938 Q815.5156,554.9375 815.5156,551.8125 Q815.5156,548.6875 816.8281,547.0313 Q818.1563,545.375 820.6563,545.375 Q821.3594,545.375 822,545.5313 Q822.6563,545.6875 823.2188,545.9844 L823.2188,548.7031 Q822.5938,548.125 822,547.8594 Q821.4063,547.5781 820.7813,547.5781 Q819.4375,547.5781 818.75,548.6563 Q818.0625,549.7188 818.0625,551.8125 Q818.0625,553.9063 818.75,554.9844 Q819.4375,556.0469 820.7813,556.0469 Q821.4063,556.0469 822,555.7813 Q822.5938,555.5 823.2188,554.9219 L823.2188,557.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="220" x="840.75" y="556.1543">MessageResourceEndpointHandler</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="669" x2="1200" y1="568" y2="568"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="676" y="576"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="159" x="688" y="582.2104">List&lt;Message&gt; _messages</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="676" y="588.8047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="117" x="688" y="595.0151">const String urlBase</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="676" y="601.6094"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="181" x="688" y="607.8198">List&lt;RouteAction&gt; RouteActions</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="676" y="614.4141"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="56" x="688" y="620.6245">int nextId;</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="669" x2="1200" y1="627.2188" y2="627.2188"/><ellipse cx="679" cy="638.2188" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="205" x="688" y="641.4292">MessageResourceEndpointHandler()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="676" y="648.0234"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="383" x="688" y="654.2339">RouteAction DetermineRouteAction(RequestContext requestContext)</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="676" y="660.8281"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="507" x="688" y="667.0386">void SendResponse(ResponseContext responseContext, NetworkStream networkStream)</text><!--MD5=[72658dde7d7c1527ffbf8d5904233397]
class RouteAction--><rect codeLine="59" fill="#FEFECE" filter="url(#f1mjqub1o0a8wu)" height="99.2188" id="RouteAction" style="stroke: #A80036; stroke-width: 1.5;" width="625" x="399" y="791.5"/><ellipse cx="669.25" cy="807.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M672.2188,813.1406 Q671.6406,813.4375 671,813.5781 Q670.3594,813.7344 669.6563,813.7344 Q667.1563,813.7344 665.8281,812.0938 Q664.5156,810.4375 664.5156,807.3125 Q664.5156,804.1875 665.8281,802.5313 Q667.1563,800.875 669.6563,800.875 Q670.3594,800.875 671,801.0313 Q671.6563,801.1875 672.2188,801.4844 L672.2188,804.2031 Q671.5938,803.625 671,803.3594 Q670.4063,803.0781 669.7813,803.0781 Q668.4375,803.0781 667.75,804.1563 Q667.0625,805.2188 667.0625,807.3125 Q667.0625,809.4063 667.75,810.4844 Q668.4375,811.5469 669.7813,811.5469 Q670.4063,811.5469 671,811.2813 Q671.5938,811 672.2188,810.4219 L672.2188,813.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="76" x="689.75" y="811.6543">RouteAction</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="400" x2="1023" y1="823.5" y2="823.5"/><ellipse cx="410" cy="834.5" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="159" x="419" y="837.7104">String PathRegex {get;set;}</text><ellipse cx="410" cy="847.3047" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="362" x="419" y="850.5151">Action&lt;RequestContext, NetworkStream&gt; PathAction {get;set;}</text><ellipse cx="410" cy="860.1094" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="173" x="419" y="863.3198">String RequestType {get;set;}</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="400" x2="1023" y1="869.9141" y2="869.9141"/><ellipse cx="410" cy="880.9141" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="599" x="419" y="884.1245">RouteAction(IAction&lt;RequestContext, NetworkStream&gt; pathAction, String pathRegex, String requestType)</text><!--MD5=[bea5b0d46523efab5ea1c1d339f396f0]
class Message--><rect codeLine="67" fill="#FEFECE" filter="url(#f1mjqub1o0a8wu)" height="99.2188" id="Message" style="stroke: #A80036; stroke-width: 1.5;" width="198" x="1059.5" y="791.5"/><ellipse cx="1126.25" cy="807.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1129.2188,813.1406 Q1128.6406,813.4375 1128,813.5781 Q1127.3594,813.7344 1126.6563,813.7344 Q1124.1563,813.7344 1122.8281,812.0938 Q1121.5156,810.4375 1121.5156,807.3125 Q1121.5156,804.1875 1122.8281,802.5313 Q1124.1563,800.875 1126.6563,800.875 Q1127.3594,800.875 1128,801.0313 Q1128.6563,801.1875 1129.2188,801.4844 L1129.2188,804.2031 Q1128.5938,803.625 1128,803.3594 Q1127.4063,803.0781 1126.7813,803.0781 Q1125.4375,803.0781 1124.75,804.1563 Q1124.0625,805.2188 1124.0625,807.3125 Q1124.0625,809.4063 1124.75,810.4844 Q1125.4375,811.5469 1126.7813,811.5469 Q1127.4063,811.5469 1128,811.2813 Q1128.5938,811 1129.2188,810.4219 L1129.2188,813.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="56" x="1146.75" y="811.6543">Message</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1060.5" x2="1256.5" y1="823.5" y2="823.5"/><ellipse cx="1070.5" cy="834.5" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="90" x="1079.5" y="837.7104">int Id {get;set;}</text><ellipse cx="1070.5" cy="847.3047" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="144" x="1079.5" y="850.5151">String Content {get;set;}</text><ellipse cx="1070.5" cy="860.1094" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="172" x="1079.5" y="863.3198">DateTime SentDate {get;set;}</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1060.5" x2="1256.5" y1="869.9141" y2="869.9141"/><ellipse cx="1070.5" cy="880.9141" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="144" x="1079.5" y="884.1245">override string ToString()</text><!--MD5=[3a668eb3a1ab23e10f3209ae5591cdc8]
class ResponseContext--><rect codeLine="75" fill="#FEFECE" filter="url(#f1mjqub1o0a8wu)" height="214.4609" id="ResponseContext" style="stroke: #A80036; stroke-width: 1.5;" width="460" x="1292.5" y="734"/><ellipse cx="1463.25" cy="750" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1466.2188,755.6406 Q1465.6406,755.9375 1465,756.0781 Q1464.3594,756.2344 1463.6563,756.2344 Q1461.1563,756.2344 1459.8281,754.5938 Q1458.5156,752.9375 1458.5156,749.8125 Q1458.5156,746.6875 1459.8281,745.0313 Q1461.1563,743.375 1463.6563,743.375 Q1464.3594,743.375 1465,743.5313 Q1465.6563,743.6875 1466.2188,743.9844 L1466.2188,746.7031 Q1465.5938,746.125 1465,745.8594 Q1464.4063,745.5781 1463.7813,745.5781 Q1462.4375,745.5781 1461.75,746.6563 Q1461.0625,747.7188 1461.0625,749.8125 Q1461.0625,751.9063 1461.75,752.9844 Q1462.4375,754.0469 1463.7813,754.0469 Q1464.4063,754.0469 1465,753.7813 Q1465.5938,753.5 1466.2188,752.9219 L1466.2188,755.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="110" x="1483.75" y="754.1543">ResponseContext</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1293.5" x2="1751.5" y1="766" y2="766"/><ellipse cx="1303.5" cy="777" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="172" x="1312.5" y="780.2104">String HTTPVersion {get;set;}</text><ellipse cx="1303.5" cy="789.8047" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="184" x="1312.5" y="793.0151">String StatusMessage {get;set}</text><ellipse cx="1303.5" cy="802.6094" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="142" x="1312.5" y="805.8198">int StatusCode {get;set}</text><ellipse cx="1303.5" cy="815.4141" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="303" x="1312.5" y="818.6245">List&lt;HttpHeaderPair&gt; HeaderPairs {get;private set;}</text><ellipse cx="1303.5" cy="828.2188" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="187" x="1312.5" y="831.4292">String Content {get;private set;}</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1293.5" x2="1751.5" y1="838.0234" y2="838.0234"/><ellipse cx="1303.5" cy="849.0234" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="218" x="1312.5" y="852.2339">static ResponseContext OKResponse()</text><ellipse cx="1303.5" cy="861.8281" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="247" x="1312.5" y="865.0386">static ResponseContext CreatedResponse()</text><ellipse cx="1303.5" cy="874.6328" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="255" x="1312.5" y="877.8433">static ResponseContext NotFoundResponse()</text><ellipse cx="1303.5" cy="887.4375" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="270" x="1312.5" y="890.6479">static ResponseContext BadRequestResponse()</text><ellipse cx="1303.5" cy="900.2422" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="348" x="1312.5" y="903.4526">ResponseContext AddHeader(HttpHeaderPair httpHeaderPair)</text><ellipse cx="1303.5" cy="913.0469" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="369" x="1312.5" y="916.2573">ResponseContext SetContent(String content, String contentType)</text><ellipse cx="1303.5" cy="925.8516" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="144" x="1312.5" y="929.062">override string ToString()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1300.5" y="935.6563"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="434" x="1312.5" y="941.8667">ResponseContext(String httpVersion, String statusMessage, int statusCode)</text><!--MD5=[4547ca20b6e363e1d9c20ec634317bbc]
reverse link IHTTPServer to BaseHTTPServer--><path d="M1168.5,88.1 C1168.5,100.51 1168.5,114.19 1168.5,127.84 " fill="none" id="IHTTPServer-backto-BaseHTTPServer" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="1161.5,88.04,1168.5,68.04,1175.5,88.04,1161.5,88.04" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[3e8e5333cc1f6f5285b74f077d4b07ef]
reverse link IResourceEndpointHandler to MessageResourceEndpointHandler--><path d="M1106.4,469.57 C1080.49,489.83 1049.94,513.72 1021.84,535.7 " fill="none" id="IResourceEndpointHandler-backto-MessageResourceEndpointHandler" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="1102.2,463.96,1122.27,457.15,1110.83,474.99,1102.2,463.96" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[1236eef9ffa8c5663deea225b02b3683]
reverse link ICRUDHandler to MessageResourceEndpointHandler--><path d="M786.84,488.52 C806.51,503.91 827.43,520.27 847.14,535.68 " fill="none" id="ICRUDHandler-backto-MessageResourceEndpointHandler" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="782.47,493.99,771.03,476.15,791.09,482.96,782.47,493.99" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[04f741812c7d3cb5e15f7a8510103012]
reverse link BaseHTTPServer to IResourceEndpointHandler--><path codeLine="97" d="M1168.5,317.17 C1168.5,340.7 1168.5,364.29 1168.5,382.83 " fill="none" id="BaseHTTPServer-backto-IResourceEndpointHandler" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="1168.5,304.13,1164.5,310.13,1168.5,316.13,1172.5,310.13,1168.5,304.13" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[6d7392f12eafbe2260d97222f7c6417c]
reverse link RequestContext to HttpHeaderPair--><path codeLine="98" d="M335.73,928.44 C350.94,935.61 366.36,942.29 381.5,948 C479.64,985.03 594.21,1011.74 685.9,1029.39 " fill="none" id="RequestContext-backto-HttpHeaderPair" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="323.59,922.6,327.2596,928.8076,334.4011,927.8078,330.7315,921.6002,323.59,922.6" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[175ed4795a2e9e9de08f056caf170d19]
reverse link MessageResourceEndpointHandler to RouteAction--><path codeLine="99" d="M860.03,684.15 C826.27,719.57 787.41,760.35 757.9,791.31 " fill="none" id="MessageResourceEndpointHandler-backto-RouteAction" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="869.4,674.31,862.3638,675.8887,861.1149,682.9909,868.1511,681.4121,869.4,674.31" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[0e7b84372203ec7517524bee1a5448e7]
reverse link MessageResourceEndpointHandler to Message--><path codeLine="100" d="M1009.31,684.15 C1043.22,719.57 1082.25,760.35 1111.89,791.31 " fill="none" id="MessageResourceEndpointHandler-backto-Message" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="999.89,674.31,1001.1446,681.4111,1008.182,682.9843,1006.9274,675.8831,999.89,674.31" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[b7a5d7ac6552f5920ca2b8d2940e3664]
link MessageResourceEndpointHandler to ResponseContext--><path codeLine="101" d="M1120.49,674.03 C1170.96,692.98 1225.48,713.89 1275.5,734 C1279.47,735.6 1283.47,737.21 1287.49,738.85 " fill="none" id="MessageResourceEndpointHandler-to-ResponseContext" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="1292.23,740.77,1285.4044,733.67,1287.5995,738.8835,1282.386,741.0787,1292.23,740.77" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[2caa162dff524aa20b7114cecef18e15]
link MessageResourceEndpointHandler to RequestContext--><path codeLine="102" d="M667.9,652.59 C575.6,672.66 472.52,699.57 381.5,734 C363.97,740.63 346.06,748.55 328.53,757.03 " fill="none" id="MessageResourceEndpointHandler-to-RequestContext" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="323.6,759.43,333.4428,759.0836,328.0948,757.2399,329.9385,751.8919,323.6,759.43" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[f7bb47bd0dfed0e9160ea7de26f6a2b1]
reverse link ResponseContext to HttpHeaderPair--><path codeLine="103" d="M1279.91,946.49 C1278.44,947 1276.97,947.5 1275.5,948 C1192.98,976.13 1099.23,1000.92 1021.09,1019.68 " fill="none" id="ResponseContext-backto-HttpHeaderPair" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="1292.19,942.16,1285.2023,940.379,1280.8707,946.1442,1287.8584,947.9252,1292.19,942.16" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[a0669da084ce62337c860c31aacaa316]
@startuml
class BaseHTTPServer implements IHTTPServer{
    + const string VERSION
    + const string NAME
    - int port
    - bool running
    - TcpListener listener
    - List<IResourceEndpointHandler> resourceEndpointHandlers

    + BaseHTTPServer(int port)
    + void Start()
    - void Run()
    - void HandleClient(TcpClient client)
}

class RequestContext{
    + String Type {get;set;}
    + String URL {get;set;}
    + String HTTPVersion {get;set;}
    + List<HttpHeaderPair> HeaderPairs {get;private set;}
    + String Body {get;set;}

    + void AddHeader(String headerLine)
    + static RequestContext GetBaseRequest(String request)
    + override string ToString()
    - RequestContext(String type, String url, String httpVersion)
}

class HttpHeaderPair{
    + String HeaderKey {get;set;}
    + String HeaderValue {get;set;}

    + HttpHeaderPair(String headerKey, String headerValue)
    + override string ToString()
}

interface IResourceEndpointHandler{
    + bool CheckResponsibility(RequestContext requestContext)
    + void HandleRequest(RequestContext requestContext)
}

interface ICRUDHandler{
    + void ListHandler(RequestContext requestContext, NetworkStream networkStream)
    + void CreateHandler(RequestContext requestContext, NetworkStream networkStream)
    + void ReadHandler(RequestContext requestContext, NetworkStream networkStream)
    + void UpdateHandler(RequestContext requestContext, NetworkStream networkStream)
    + void DeleteHandler(RequestContext requestContext, NetworkStream networkStream)
}

class MessageResourceEndpointHandler implements IResourceEndpointHandler, ICRUDHandler{
    - List<Message> _messages
    - const String urlBase
    - List<RouteAction> RouteActions
    - int nextId;

    + MessageResourceEndpointHandler()
    - RouteAction DetermineRouteAction(RequestContext requestContext)
    - void SendResponse(ResponseContext responseContext, NetworkStream networkStream)
}
 class RouteAction{
     + String PathRegex {get;set;}
     + Action<RequestContext, NetworkStream> PathAction {get;set;}
     + String RequestType {get;set;}

     + RouteAction(IAction<RequestContext, NetworkStream> pathAction, String pathRegex, String requestType)
 }

 class Message{
     + int Id {get;set;}
     + String Content {get;set;}
     + DateTime SentDate {get;set;}

     + override string ToString()
 }

class ResponseContext{
    + String HTTPVersion {get;set;}
    + String StatusMessage {get;set}
    + int StatusCode {get;set}
    + List<HttpHeaderPair> HeaderPairs {get;private set;}
    + String Content {get;private set;}

    + static ResponseContext OKResponse()
    + static ResponseContext CreatedResponse()
    + static ResponseContext NotFoundResponse()
    + static ResponseContext BadRequestResponse()
    + ResponseContext AddHeader(HttpHeaderPair httpHeaderPair)
    + ResponseContext SetContent(String content, String contentType)
    + override string ToString()
    - ResponseContext(String httpVersion, String statusMessage, int statusCode)
}

interface IHTTPServer{
    + void Start()
}


 BaseHTTPServer o- - IResourceEndpointHandler
 RequestContext o- - HttpHeaderPair
 MessageResourceEndpointHandler o- - RouteAction
 MessageResourceEndpointHandler o- -Message
 MessageResourceEndpointHandler ..> ResponseContext
 MessageResourceEndpointHandler ..> RequestContext
 ResponseContext o- - HttpHeaderPair
@enduml

PlantUML version 1.2020.18(Wed Sep 30 21:40:44 CEST 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>