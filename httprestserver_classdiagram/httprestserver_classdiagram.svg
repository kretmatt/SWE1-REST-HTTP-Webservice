<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1184px" preserveAspectRatio="none" style="width:2450px;height:1184px;" version="1.1" viewBox="0 0 2450 1184" width="2450px" zoomAndPan="magnify"><defs><filter height="300%" id="f1pnofm38scwsv" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[d621a1cf36efacd102423184f657d5e8]
class BaseHTTPServer--><rect codeLine="1" fill="#FEFECE" filter="url(#f1pnofm38scwsv)" height="150.4375" id="BaseHTTPServer" style="stroke: #A80036; stroke-width: 1.5;" width="368" x="1810.5" y="230"/><ellipse cx="1939.25" cy="246" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1942.2188,251.6406 Q1941.6406,251.9375 1941,252.0781 Q1940.3594,252.2344 1939.6563,252.2344 Q1937.1563,252.2344 1935.8281,250.5938 Q1934.5156,248.9375 1934.5156,245.8125 Q1934.5156,242.6875 1935.8281,241.0313 Q1937.1563,239.375 1939.6563,239.375 Q1940.3594,239.375 1941,239.5313 Q1941.6563,239.6875 1942.2188,239.9844 L1942.2188,242.7031 Q1941.5938,242.125 1941,241.8594 Q1940.4063,241.5781 1939.7813,241.5781 Q1938.4375,241.5781 1937.75,242.6563 Q1937.0625,243.7188 1937.0625,245.8125 Q1937.0625,247.9063 1937.75,248.9844 Q1938.4375,250.0469 1939.7813,250.0469 Q1940.4063,250.0469 1941,249.7813 Q1941.5938,249.5 1942.2188,248.9219 L1942.2188,251.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="102" x="1959.75" y="250.1543">BaseHTTPServer</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1811.5" x2="2177.5" y1="262" y2="262"/><ellipse cx="1821.5" cy="273" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="121" x="1830.5" y="276.2104">const string VERSION</text><ellipse cx="1821.5" cy="285.8047" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="103" x="1830.5" y="289.0151">const string NAME</text><ellipse cx="1821.5" cy="298.6094" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="342" x="1830.5" y="301.8198">List&lt;IResourceEndpointHandler&gt; resourceEndpointHandlers</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1818.5" y="308.4141"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="41" x="1830.5" y="314.6245">int port</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1818.5" y="321.2188"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="71" x="1830.5" y="327.4292">bool running</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1818.5" y="334.0234"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="116" x="1830.5" y="340.2339">ITcpListener listener</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1811.5" x2="2177.5" y1="346.8281" y2="346.8281"/><ellipse cx="1821.5" cy="357.8281" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="145" x="1830.5" y="361.0386">BaseHTTPServer(int port)</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1818.5" y="367.6328"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="56" x="1830.5" y="373.8433">void Run()</text><!--MD5=[496b068da06cd131afb585115329e858]
class IHTTPServer--><rect codeLine="90" fill="#FEFECE" filter="url(#f1pnofm38scwsv)" height="73.6094" id="IHTTPServer" style="stroke: #A80036; stroke-width: 1.5;" width="240" x="1874.5" y="51.5"/><ellipse cx="1953.25" cy="67.5" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1949.1719,63.2656 L1949.1719,61.1094 L1956.5625,61.1094 L1956.5625,63.2656 L1954.0938,63.2656 L1954.0938,71.3438 L1956.5625,71.3438 L1956.5625,73.5 L1949.1719,73.5 L1949.1719,71.3438 L1951.6406,71.3438 L1951.6406,63.2656 L1949.1719,63.2656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="74" x="1973.75" y="71.6543">IHTTPServer</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1875.5" x2="2113.5" y1="83.5" y2="83.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1875.5" x2="2113.5" y1="91.5" y2="91.5"/><ellipse cx="1885.5" cy="102.5" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="63" x="1894.5" y="105.7104">void Start()</text><ellipse cx="1885.5" cy="115.3047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="214" x="1894.5" y="118.5151">void HandleClient(ITcpClient tcpClient)</text><!--MD5=[68efced5630f6877a792fbf4b1d46ff2]
class RequestContext--><rect codeLine="14" fill="#FEFECE" filter="url(#f1pnofm38scwsv)" height="163.2422" id="RequestContext" style="stroke: #A80036; stroke-width: 1.5;" width="357" x="7" y="822.5"/><ellipse cx="131.25" cy="838.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M134.2188,844.1406 Q133.6406,844.4375 133,844.5781 Q132.3594,844.7344 131.6563,844.7344 Q129.1563,844.7344 127.8281,843.0938 Q126.5156,841.4375 126.5156,838.3125 Q126.5156,835.1875 127.8281,833.5313 Q129.1563,831.875 131.6563,831.875 Q132.3594,831.875 133,832.0313 Q133.6563,832.1875 134.2188,832.4844 L134.2188,835.2031 Q133.5938,834.625 133,834.3594 Q132.4063,834.0781 131.7813,834.0781 Q130.4375,834.0781 129.75,835.1563 Q129.0625,836.2188 129.0625,838.3125 Q129.0625,840.4063 129.75,841.4844 Q130.4375,842.5469 131.7813,842.5469 Q132.4063,842.5469 133,842.2813 Q133.5938,842 134.2188,841.4219 L134.2188,844.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="100" x="151.75" y="842.6543">RequestContext</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="8" x2="363" y1="854.5" y2="854.5"/><ellipse cx="18" cy="865.5" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="162" x="27" y="868.7104">EHTTPVerbs Type {get;set;}</text><ellipse cx="18" cy="878.3047" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="121" x="27" y="881.5151">String URL {get;set;}</text><ellipse cx="18" cy="891.1094" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="172" x="27" y="894.3198">String HTTPVersion {get;set;}</text><ellipse cx="18" cy="903.9141" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="303" x="27" y="907.1245">List&lt;HttpHeaderPair&gt; HeaderPairs {get;private set;}</text><ellipse cx="18" cy="916.7188" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="128" x="27" y="919.9292">String Body {get;set;}</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="8" x2="363" y1="926.5234" y2="926.5234"/><ellipse cx="18" cy="937.5234" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="198" x="27" y="940.7339">void AddHeader(String headerLine)</text><ellipse cx="18" cy="950.3281" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="313" x="27" y="953.5386">static RequestContext GetBaseRequest(String request)</text><ellipse cx="18" cy="963.1328" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="144" x="27" y="966.3433">override string ToString()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="15" y="972.9375"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="331" x="27" y="979.1479">RequestContext(String type, String url, String httpVersion)</text><!--MD5=[677561f5d4a6bdd391d5d93a52324b49]
class HttpHeaderPair--><rect codeLine="27" fill="#FEFECE" filter="url(#f1pnofm38scwsv)" height="99.2188" id="HttpHeaderPair" style="stroke: #A80036; stroke-width: 1.5;" width="335" x="704" y="1071"/><ellipse cx="818.75" cy="1087" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M821.7188,1092.6406 Q821.1406,1092.9375 820.5,1093.0781 Q819.8594,1093.2344 819.1563,1093.2344 Q816.6563,1093.2344 815.3281,1091.5938 Q814.0156,1089.9375 814.0156,1086.8125 Q814.0156,1083.6875 815.3281,1082.0313 Q816.6563,1080.375 819.1563,1080.375 Q819.8594,1080.375 820.5,1080.5313 Q821.1563,1080.6875 821.7188,1080.9844 L821.7188,1083.7031 Q821.0938,1083.125 820.5,1082.8594 Q819.9063,1082.5781 819.2813,1082.5781 Q817.9375,1082.5781 817.25,1083.6563 Q816.5625,1084.7188 816.5625,1086.8125 Q816.5625,1088.9063 817.25,1089.9844 Q817.9375,1091.0469 819.2813,1091.0469 Q819.9063,1091.0469 820.5,1090.7813 Q821.0938,1090.5 821.7188,1089.9219 L821.7188,1092.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="97" x="839.25" y="1091.1543">HttpHeaderPair</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="705" x2="1038" y1="1103" y2="1103"/><ellipse cx="715" cy="1114" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="161" x="724" y="1117.2104">String HeaderKey {get;set;}</text><ellipse cx="715" cy="1126.8047" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="172" x="724" y="1130.0151">String HeaderValue {get;set;}</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="705" x2="1038" y1="1136.6094" y2="1136.6094"/><ellipse cx="715" cy="1147.6094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="309" x="724" y="1150.8198">HttpHeaderPair(String headerKey, String headerValue)</text><ellipse cx="715" cy="1160.4141" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="144" x="724" y="1163.6245">override string ToString()</text><!--MD5=[b937ea1e5ddaf966c75792a5554ec602]
class IResourceEndpointHandler--><rect codeLine="35" fill="#FEFECE" filter="url(#f1pnofm38scwsv)" height="73.6094" id="IResourceEndpointHandler" style="stroke: #A80036; stroke-width: 1.5;" width="402" x="1400.5" y="459"/><ellipse cx="1513.75" cy="475" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1509.6719,470.7656 L1509.6719,468.6094 L1517.0625,468.6094 L1517.0625,470.7656 L1514.5938,470.7656 L1514.5938,478.8438 L1517.0625,478.8438 L1517.0625,481 L1509.6719,481 L1509.6719,478.8438 L1512.1406,478.8438 L1512.1406,470.7656 L1509.6719,470.7656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="167" x="1534.25" y="479.1543">IResourceEndpointHandler</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1401.5" x2="1801.5" y1="491" y2="491"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1401.5" x2="1801.5" y1="499" y2="499"/><ellipse cx="1411.5" cy="510" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="328" x="1420.5" y="513.2104">bool CheckResponsibility(RequestContext requestContext)</text><ellipse cx="1411.5" cy="522.8047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="376" x="1420.5" y="526.0151">ResponseContext HandleRequest(RequestContext requestContext)</text><!--MD5=[69aa3d4358c8cfb7789bd1ad26a563d6]
class ICRUDHandler--><rect codeLine="40" fill="#FEFECE" filter="url(#f1pnofm38scwsv)" height="112.0234" id="ICRUDHandler" style="stroke: #A80036; stroke-width: 1.5;" width="401" x="964" y="440"/><ellipse cx="1116.75" cy="456" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1112.6719,451.7656 L1112.6719,449.6094 L1120.0625,449.6094 L1120.0625,451.7656 L1117.5938,451.7656 L1117.5938,459.8438 L1120.0625,459.8438 L1120.0625,462 L1112.6719,462 L1112.6719,459.8438 L1115.1406,459.8438 L1115.1406,451.7656 L1112.6719,451.7656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="87" x="1137.25" y="460.1543">ICRUDHandler</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="965" x2="1364" y1="472" y2="472"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="965" x2="1364" y1="480" y2="480"/><ellipse cx="975" cy="491" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="355" x="984" y="494.2104">ResponseContext ListHandler(RequestContext requestContext)</text><ellipse cx="975" cy="503.8047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="373" x="984" y="507.0151">ResponseContext CreateHandler(RequestContext requestContext)</text><ellipse cx="975" cy="516.6094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="363" x="984" y="519.8198">ResponseContext ReadHandler(RequestContext requestContext)</text><ellipse cx="975" cy="529.4141" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="375" x="984" y="532.6245">ResponseContext UpdateHandler(RequestContext requestContext)</text><ellipse cx="975" cy="542.2188" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="371" x="984" y="545.4292">ResponseContext DeleteHandler(RequestContext requestContext)</text><!--MD5=[a376f80f529380c08341def9a9715ac8]
class MessageResourceEndpointHandler--><rect codeLine="48" fill="#FEFECE" filter="url(#f1pnofm38scwsv)" height="124.8281" id="MessageResourceEndpointHandler" style="stroke: #A80036; stroke-width: 1.5;" width="409" x="983" y="612"/><ellipse cx="1073.25" cy="628" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1076.2188,633.6406 Q1075.6406,633.9375 1075,634.0781 Q1074.3594,634.2344 1073.6563,634.2344 Q1071.1563,634.2344 1069.8281,632.5938 Q1068.5156,630.9375 1068.5156,627.8125 Q1068.5156,624.6875 1069.8281,623.0313 Q1071.1563,621.375 1073.6563,621.375 Q1074.3594,621.375 1075,621.5313 Q1075.6563,621.6875 1076.2188,621.9844 L1076.2188,624.7031 Q1075.5938,624.125 1075,623.8594 Q1074.4063,623.5781 1073.7813,623.5781 Q1072.4375,623.5781 1071.75,624.6563 Q1071.0625,625.7188 1071.0625,627.8125 Q1071.0625,629.9063 1071.75,630.9844 Q1072.4375,632.0469 1073.7813,632.0469 Q1074.4063,632.0469 1075,631.7813 Q1075.5938,631.5 1076.2188,630.9219 L1076.2188,633.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="220" x="1093.75" y="632.1543">MessageResourceEndpointHandler</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="984" x2="1391" y1="644" y2="644"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="991" y="652"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="159" x="1003" y="658.2104">List&lt;Message&gt; _messages</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="991" y="664.8047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="117" x="1003" y="671.0151">const String urlBase</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="991" y="677.6094"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="181" x="1003" y="683.8198">List&lt;RouteAction&gt; RouteActions</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="991" y="690.4141"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="56" x="1003" y="696.6245">int nextId;</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="984" x2="1391" y1="703.2188" y2="703.2188"/><ellipse cx="994" cy="714.2188" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="205" x="1003" y="717.4292">MessageResourceEndpointHandler()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="991" y="724.0234"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="383" x="1003" y="730.2339">RouteAction DetermineRouteAction(RequestContext requestContext)</text><!--MD5=[72658dde7d7c1527ffbf8d5904233397]
class RouteAction--><rect codeLine="57" fill="#FEFECE" filter="url(#f1pnofm38scwsv)" height="99.2188" id="RouteAction" style="stroke: #A80036; stroke-width: 1.5;" width="660" x="399.5" y="854.5"/><ellipse cx="687.25" cy="870.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M690.2188,876.1406 Q689.6406,876.4375 689,876.5781 Q688.3594,876.7344 687.6563,876.7344 Q685.1563,876.7344 683.8281,875.0938 Q682.5156,873.4375 682.5156,870.3125 Q682.5156,867.1875 683.8281,865.5313 Q685.1563,863.875 687.6563,863.875 Q688.3594,863.875 689,864.0313 Q689.6563,864.1875 690.2188,864.4844 L690.2188,867.2031 Q689.5938,866.625 689,866.3594 Q688.4063,866.0781 687.7813,866.0781 Q686.4375,866.0781 685.75,867.1563 Q685.0625,868.2188 685.0625,870.3125 Q685.0625,872.4063 685.75,873.4844 Q686.4375,874.5469 687.7813,874.5469 Q688.4063,874.5469 689,874.2813 Q689.5938,874 690.2188,873.4219 L690.2188,876.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="76" x="707.75" y="874.6543">RouteAction</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="400.5" x2="1058.5" y1="886.5" y2="886.5"/><ellipse cx="410.5" cy="897.5" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="159" x="419.5" y="900.7104">String PathRegex {get;set;}</text><ellipse cx="410.5" cy="910.3047" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="365" x="419.5" y="913.5151">Func&lt;RequestContext, ResponseContext&gt; PathAction {get;set;}</text><ellipse cx="410.5" cy="923.1094" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="208" x="419.5" y="926.3198">EHTTPVerbs RequestType {get;set;}</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="400.5" x2="1058.5" y1="932.9141" y2="932.9141"/><ellipse cx="410.5" cy="943.9141" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="634" x="419.5" y="947.1245">RouteAction(Func&lt;RequestContext, ResponseContext&gt; pathAction, String pathRegex, EHTTPVerbs requestType)</text><!--MD5=[bea5b0d46523efab5ea1c1d339f396f0]
class Message--><rect codeLine="65" fill="#FEFECE" filter="url(#f1pnofm38scwsv)" height="99.2188" id="Message" style="stroke: #A80036; stroke-width: 1.5;" width="198" x="1094.5" y="854.5"/><ellipse cx="1161.25" cy="870.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1164.2188,876.1406 Q1163.6406,876.4375 1163,876.5781 Q1162.3594,876.7344 1161.6563,876.7344 Q1159.1563,876.7344 1157.8281,875.0938 Q1156.5156,873.4375 1156.5156,870.3125 Q1156.5156,867.1875 1157.8281,865.5313 Q1159.1563,863.875 1161.6563,863.875 Q1162.3594,863.875 1163,864.0313 Q1163.6563,864.1875 1164.2188,864.4844 L1164.2188,867.2031 Q1163.5938,866.625 1163,866.3594 Q1162.4063,866.0781 1161.7813,866.0781 Q1160.4375,866.0781 1159.75,867.1563 Q1159.0625,868.2188 1159.0625,870.3125 Q1159.0625,872.4063 1159.75,873.4844 Q1160.4375,874.5469 1161.7813,874.5469 Q1162.4063,874.5469 1163,874.2813 Q1163.5938,874 1164.2188,873.4219 L1164.2188,876.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="56" x="1181.75" y="874.6543">Message</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1095.5" x2="1291.5" y1="886.5" y2="886.5"/><ellipse cx="1105.5" cy="897.5" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="90" x="1114.5" y="900.7104">int Id {get;set;}</text><ellipse cx="1105.5" cy="910.3047" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="144" x="1114.5" y="913.5151">String Content {get;set;}</text><ellipse cx="1105.5" cy="923.1094" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="172" x="1114.5" y="926.3198">DateTime SentDate {get;set;}</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1095.5" x2="1291.5" y1="932.9141" y2="932.9141"/><ellipse cx="1105.5" cy="943.9141" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="144" x="1114.5" y="947.1245">override string ToString()</text><!--MD5=[3a668eb3a1ab23e10f3209ae5591cdc8]
class ResponseContext--><rect codeLine="73" fill="#FEFECE" filter="url(#f1pnofm38scwsv)" height="214.4609" id="ResponseContext" style="stroke: #A80036; stroke-width: 1.5;" width="460" x="1327.5" y="797"/><ellipse cx="1498.25" cy="813" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1501.2188,818.6406 Q1500.6406,818.9375 1500,819.0781 Q1499.3594,819.2344 1498.6563,819.2344 Q1496.1563,819.2344 1494.8281,817.5938 Q1493.5156,815.9375 1493.5156,812.8125 Q1493.5156,809.6875 1494.8281,808.0313 Q1496.1563,806.375 1498.6563,806.375 Q1499.3594,806.375 1500,806.5313 Q1500.6563,806.6875 1501.2188,806.9844 L1501.2188,809.7031 Q1500.5938,809.125 1500,808.8594 Q1499.4063,808.5781 1498.7813,808.5781 Q1497.4375,808.5781 1496.75,809.6563 Q1496.0625,810.7188 1496.0625,812.8125 Q1496.0625,814.9063 1496.75,815.9844 Q1497.4375,817.0469 1498.7813,817.0469 Q1499.4063,817.0469 1500,816.7813 Q1500.5938,816.5 1501.2188,815.9219 L1501.2188,818.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="110" x="1518.75" y="817.1543">ResponseContext</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1328.5" x2="1786.5" y1="829" y2="829"/><ellipse cx="1338.5" cy="840" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="172" x="1347.5" y="843.2104">String HTTPVersion {get;set;}</text><ellipse cx="1338.5" cy="852.8047" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="184" x="1347.5" y="856.0151">String StatusMessage {get;set}</text><ellipse cx="1338.5" cy="865.6094" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="142" x="1347.5" y="868.8198">int StatusCode {get;set}</text><ellipse cx="1338.5" cy="878.4141" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="303" x="1347.5" y="881.6245">List&lt;HttpHeaderPair&gt; HeaderPairs {get;private set;}</text><ellipse cx="1338.5" cy="891.2188" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="187" x="1347.5" y="894.4292">String Content {get;private set;}</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1328.5" x2="1786.5" y1="901.0234" y2="901.0234"/><ellipse cx="1338.5" cy="912.0234" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="218" x="1347.5" y="915.2339">static ResponseContext OKResponse()</text><ellipse cx="1338.5" cy="924.8281" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="247" x="1347.5" y="928.0386">static ResponseContext CreatedResponse()</text><ellipse cx="1338.5" cy="937.6328" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="255" x="1347.5" y="940.8433">static ResponseContext NotFoundResponse()</text><ellipse cx="1338.5" cy="950.4375" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="270" x="1347.5" y="953.6479">static ResponseContext BadRequestResponse()</text><ellipse cx="1338.5" cy="963.2422" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="348" x="1347.5" y="966.4526">ResponseContext AddHeader(HttpHeaderPair httpHeaderPair)</text><ellipse cx="1338.5" cy="976.0469" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="369" x="1347.5" y="979.2573">ResponseContext SetContent(String content, String contentType)</text><ellipse cx="1338.5" cy="988.8516" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="144" x="1347.5" y="992.062">override string ToString()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1335.5" y="998.6563"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="434" x="1347.5" y="1004.8667">ResponseContext(String httpVersion, String statusMessage, int statusCode)</text><!--MD5=[151f6a91d56d467d7e7faed9a9a07875]
class EHTTPVerbs--><rect codeLine="96" fill="#FEFECE" filter="url(#f1pnofm38scwsv)" height="163.2422" id="EHTTPVerbs" style="stroke: #A80036; stroke-width: 1.5;" width="107" x="2150" y="7"/><ellipse cx="2165" cy="23" fill="#EB937F" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2169.1094,29 L2161.3906,29 L2161.3906,16.6094 L2169.1094,16.6094 L2169.1094,18.7656 L2163.8438,18.7656 L2163.8438,21.4375 L2168.6094,21.4375 L2168.6094,23.5938 L2163.8438,23.5938 L2163.8438,26.8438 L2169.1094,26.8438 L2169.1094,29 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="75" x="2179" y="27.1543">EHTTPVerbs</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2151" x2="2256" y1="39" y2="39"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="27" x="2156" y="53.2104">GET,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="34" x="2156" y="66.0151">HEAD,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="35" x="2156" y="78.8198">POST,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="46" x="2156" y="91.6245">DELETE,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="26" x="2156" y="104.4292">PUT,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="59" x="2156" y="117.2339">CONNECT,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="40" x="2156" y="130.0386">TRACE,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="41" x="2156" y="142.8433">PATCH,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="51" x="2156" y="155.6479">OPTIONS</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2151" x2="2256" y1="162.2422" y2="162.2422"/><!--MD5=[5b2cc669032a274a409f4b77bb3cce72]
class ITcpClient--><rect codeLine="108" fill="#FEFECE" filter="url(#f1pnofm38scwsv)" height="73.6094" id="ITcpClient" style="stroke: #A80036; stroke-width: 1.5;" width="142" x="1917.5" y="637.5"/><ellipse cx="1954.55" cy="653.5" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1950.4719,649.2656 L1950.4719,647.1094 L1957.8625,647.1094 L1957.8625,649.2656 L1955.3938,649.2656 L1955.3938,657.3438 L1957.8625,657.3438 L1957.8625,659.5 L1950.4719,659.5 L1950.4719,657.3438 L1952.9406,657.3438 L1952.9406,649.2656 L1950.4719,649.2656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="61" x="1973.45" y="657.6543">ITcpClient</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1918.5" x2="2058.5" y1="669.5" y2="669.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1918.5" x2="2058.5" y1="677.5" y2="677.5"/><ellipse cx="1928.5" cy="688.5" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="116" x="1937.5" y="691.7104">Stream GetStream()</text><ellipse cx="1928.5" cy="701.3047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="67" x="1937.5" y="704.5151">void Close()</text><!--MD5=[fe50a4f6767356ff4dcdadb85ef8cbdd]
class IDisposable--><rect fill="#FEFECE" filter="url(#f1pnofm38scwsv)" height="48" id="IDisposable" style="stroke: #A80036; stroke-width: 1.5;" width="103" x="1838" y="472"/><ellipse cx="1853" cy="488" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1848.9219,483.7656 L1848.9219,481.6094 L1856.3125,481.6094 L1856.3125,483.7656 L1853.8438,483.7656 L1853.8438,491.8438 L1856.3125,491.8438 L1856.3125,494 L1848.9219,494 L1848.9219,491.8438 L1851.3906,491.8438 L1851.3906,483.7656 L1848.9219,483.7656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="71" x="1867" y="492.1543">IDisposable</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1839" x2="1940" y1="504" y2="504"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1839" x2="1940" y1="512" y2="512"/><!--MD5=[ab92dad1282953637996e6d7105c4bd8]
class ITcpListener--><rect codeLine="113" fill="#FEFECE" filter="url(#f1pnofm38scwsv)" height="86.4141" id="ITcpListener" style="stroke: #A80036; stroke-width: 1.5;" width="179" x="2048" y="453"/><ellipse cx="2095.25" cy="469" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2091.1719,464.7656 L2091.1719,462.6094 L2098.5625,462.6094 L2098.5625,464.7656 L2096.0938,464.7656 L2096.0938,472.8438 L2098.5625,472.8438 L2098.5625,475 L2091.1719,475 L2091.1719,472.8438 L2093.6406,472.8438 L2093.6406,464.7656 L2091.1719,464.7656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="76" x="2115.75" y="473.1543">ITcpListener</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2049" x2="2226" y1="485" y2="485"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2049" x2="2226" y1="493" y2="493"/><ellipse cx="2059" cy="504" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="63" x="2068" y="507.2104">void Start()</text><ellipse cx="2059" cy="516.8047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="61" x="2068" y="520.0151">void Stop()</text><ellipse cx="2059" cy="529.6094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="153" x="2068" y="532.8198">TcpClient AcceptTcpClient()</text><!--MD5=[8547e8cd29eb525428380b514614e50a]
class TcpClient--><rect codeLine="119" fill="#FEFECE" filter="url(#f1pnofm38scwsv)" height="86.4141" id="TcpClient" style="stroke: #A80036; stroke-width: 1.5;" width="310" x="1833.5" y="861"/><ellipse cx="1955.75" cy="877" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1958.7188,882.6406 Q1958.1406,882.9375 1957.5,883.0781 Q1956.8594,883.2344 1956.1563,883.2344 Q1953.6563,883.2344 1952.3281,881.5938 Q1951.0156,879.9375 1951.0156,876.8125 Q1951.0156,873.6875 1952.3281,872.0313 Q1953.6563,870.375 1956.1563,870.375 Q1956.8594,870.375 1957.5,870.5313 Q1958.1563,870.6875 1958.7188,870.9844 L1958.7188,873.7031 Q1958.0938,873.125 1957.5,872.8594 Q1956.9063,872.5781 1956.2813,872.5781 Q1954.9375,872.5781 1954.25,873.6563 Q1953.5625,874.7188 1953.5625,876.8125 Q1953.5625,878.9063 1954.25,879.9844 Q1954.9375,881.0469 1956.2813,881.0469 Q1956.9063,881.0469 1957.5,880.7813 Q1958.0938,880.5 1958.7188,879.9219 L1958.7188,882.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="57" x="1976.25" y="881.1543">TcpClient</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1834.5" x2="2142.5" y1="893" y2="893"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1841.5" y="901"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="264" x="1853.5" y="907.2104">readonly System.Net.Sockets.TcpClient _client</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1834.5" x2="2142.5" y1="913.8047" y2="913.8047"/><ellipse cx="1844.5" cy="924.8047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="60" x="1853.5" y="928.0151">TcpClient()</text><ellipse cx="1844.5" cy="937.6094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="284" x="1853.5" y="940.8198">TcpClient(System.Net.Sockets.TcpClient tcpClient)</text><!--MD5=[d5b88652b7ded3c60402ab0f54a4817f]
class TcpListener--><rect codeLine="126" fill="#FEFECE" filter="url(#f1pnofm38scwsv)" height="73.6094" id="TcpListener" style="stroke: #A80036; stroke-width: 1.5;" width="341" x="2095" y="637.5"/><ellipse cx="2225.25" cy="653.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2228.2188,659.1406 Q2227.6406,659.4375 2227,659.5781 Q2226.3594,659.7344 2225.6563,659.7344 Q2223.1563,659.7344 2221.8281,658.0938 Q2220.5156,656.4375 2220.5156,653.3125 Q2220.5156,650.1875 2221.8281,648.5313 Q2223.1563,646.875 2225.6563,646.875 Q2226.3594,646.875 2227,647.0313 Q2227.6563,647.1875 2228.2188,647.4844 L2228.2188,650.2031 Q2227.5938,649.625 2227,649.3594 Q2226.4063,649.0781 2225.7813,649.0781 Q2224.4375,649.0781 2223.75,650.1563 Q2223.0625,651.2188 2223.0625,653.3125 Q2223.0625,655.4063 2223.75,656.4844 Q2224.4375,657.5469 2225.7813,657.5469 Q2226.4063,657.5469 2227,657.2813 Q2227.5938,657 2228.2188,656.4219 L2228.2188,659.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="72" x="2245.75" y="657.6543">TcpListener</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2096" x2="2435" y1="669.5" y2="669.5"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="2103" y="677.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="315" x="2115" y="683.7104">readonly System.Net.Sockets.TcpListener _tcpListener;</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2096" x2="2435" y1="690.3047" y2="690.3047"/><ellipse cx="2106" cy="701.3047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="237" x="2115" y="704.5151">TcpListener(IPAddress ipAddress, in port)</text><!--MD5=[4547ca20b6e363e1d9c20ec634317bbc]
reverse link IHTTPServer to BaseHTTPServer--><path d="M1994.5,146.01 C1994.5,171.58 1994.5,202.16 1994.5,229.56 " fill="none" id="IHTTPServer-backto-BaseHTTPServer" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="1987.5,145.89,1994.5,125.89,2001.5,145.89,1987.5,145.89" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[3e8e5333cc1f6f5285b74f077d4b07ef]
reverse link IResourceEndpointHandler to MessageResourceEndpointHandler--><path d="M1498.28,541.01 C1447.99,562.45 1386.69,588.58 1331.85,611.96 " fill="none" id="IResourceEndpointHandler-backto-MessageResourceEndpointHandler" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="1495.83,534.44,1516.97,533.04,1501.32,547.32,1495.83,534.44" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[1236eef9ffa8c5663deea225b02b3683]
reverse link ICRUDHandler to MessageResourceEndpointHandler--><path d="M1174.34,572.52 C1176.05,585.66 1177.82,599.18 1179.47,611.89 " fill="none" id="ICRUDHandler-backto-MessageResourceEndpointHandler" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="1167.36,573.1,1171.71,552.36,1181.24,571.29,1167.36,573.1" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[a0db83484e7ae58c08a19deda9b44169]
reverse link IDisposable to ITcpClient--><path d="M1912.3,537.66 C1929.16,567.71 1951.92,608.28 1968.16,637.24 " fill="none" id="IDisposable-backto-ITcpClient" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="1906.12,540.94,1902.44,520.07,1918.33,534.09,1906.12,540.94" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[265fc702f00f66c025f74a1cba707235]
reverse link ITcpClient to TcpClient--><path d="M1988.5,731.69 C1988.5,771.68 1988.5,824.56 1988.5,860.94 " fill="none" id="ITcpClient-backto-TcpClient" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="1981.5,731.55,1988.5,711.55,1995.5,731.55,1981.5,731.55" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[1fb71f3c81f231f56c66734d6cd5a268]
reverse link ITcpListener to TcpListener--><path d="M2180.16,555.82 C2199.68,582.75 2222.2,613.8 2239.2,637.24 " fill="none" id="ITcpListener-backto-TcpListener" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="2174.23,559.58,2168.16,539.28,2185.57,551.36,2174.23,559.58" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[04f741812c7d3cb5e15f7a8510103012]
reverse link BaseHTTPServer to IResourceEndpointHandler--><path codeLine="133" d="M1828.63,385.77 C1775.67,411.24 1719.67,438.17 1676.52,458.92 " fill="none" id="BaseHTTPServer-backto-IResourceEndpointHandler" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="1840.59,380.02,1833.4495,379.0131,1829.7738,385.2171,1836.9142,386.2239,1840.59,380.02" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[6d7392f12eafbe2260d97222f7c6417c]
reverse link RequestContext to HttpHeaderPair--><path codeLine="134" d="M335.02,991.26 C350.45,998.52 366.12,1005.27 381.5,1011 C485.59,1049.81 607.54,1076.87 703.75,1094.26 " fill="none" id="RequestContext-backto-HttpHeaderPair" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="323.26,985.61,326.9358,991.8139,334.0762,990.8071,330.4005,984.6031,323.26,985.61" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[175ed4795a2e9e9de08f056caf170d19]
reverse link MessageResourceEndpointHandler to RouteAction--><path codeLine="135" d="M1051.67,742.97 C979.64,778.75 892.79,821.89 827.42,854.36 " fill="none" id="MessageResourceEndpointHandler-backto-RouteAction" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="1063.56,737.06,1056.4068,736.148,1052.8137,742.4002,1059.9669,743.3122,1063.56,737.06" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[0e7b84372203ec7517524bee1a5448e7]
reverse link MessageResourceEndpointHandler to Message--><path codeLine="136" d="M1189.47,750.37 C1190.38,784.57 1191.42,824.1 1192.22,854.36 " fill="none" id="MessageResourceEndpointHandler-backto-Message" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="1189.12,737.06,1185.2798,743.1635,1189.4367,749.0558,1193.277,742.9523,1189.12,737.06" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[b7a5d7ac6552f5920ca2b8d2940e3664]
link MessageResourceEndpointHandler to ResponseContext--><path codeLine="137" d="M1287.63,737.06 C1316.4,754.76 1348.68,774.6 1380.63,794.25 " fill="none" id="MessageResourceEndpointHandler-to-ResponseContext" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="1384.93,796.89,1379.3539,788.7717,1380.6693,794.2735,1375.1675,795.5889,1384.93,796.89" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[2caa162dff524aa20b7114cecef18e15]
link MessageResourceEndpointHandler to RequestContext--><path codeLine="138" d="M982.98,686.77 C817.27,700.51 579.62,730.75 381.5,797 C362.64,803.31 343.46,811.35 324.84,820.18 " fill="none" id="MessageResourceEndpointHandler-to-RequestContext" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="320.12,822.45,329.9648,822.1666,324.6287,820.2887,326.5067,814.9526,320.12,822.45" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[f7bb47bd0dfed0e9160ea7de26f6a2b1]
reverse link ResponseContext to HttpHeaderPair--><path codeLine="139" d="M1314.75,1009.22 C1313,1009.82 1311.25,1010.41 1309.5,1011 C1221.66,1040.44 1121.52,1065.83 1039.18,1084.63 " fill="none" id="ResponseContext-backto-HttpHeaderPair" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="1327.29,1004.86,1320.3085,1003.0547,1315.9569,1008.8048,1322.9384,1010.6101,1327.29,1004.86" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[308493852bc8eb0685eb82f6385cc45e]
link BaseHTTPServer to ITcpClient--><path codeLine="140" d="M1993.29,380.37 C1992.05,456.26 1990.17,571.28 1989.17,632.23 " fill="none" id="BaseHTTPServer-to-ITcpClient" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="1989.09,637.24,1993.2437,628.3099,1989.1757,632.2407,1985.2449,628.1728,1989.09,637.24" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[28784087bc38b4ad3f126e8a8117a7c2]
reverse link BaseHTTPServer to ITcpListener--><path codeLine="141" d="M2058.57,390.68 C2074.9,412.27 2091.76,434.55 2105.68,452.95 " fill="none" id="BaseHTTPServer-backto-ITcpListener" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="2050.61,380.16,2051.0385,387.3584,2057.8479,389.7314,2057.4194,382.5331,2050.61,380.16" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[94e995d5958880c12b0cd18c0614f04d]
link ITcpListener to ITcpClient--><path codeLine="142" d="M2101.81,539.28 C2077.77,567.76 2046.24,605.1 2022.55,633.17 " fill="none" id="ITcpListener-to-ITcpClient" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="2019.11,637.24,2027.9698,632.9384,2022.3333,633.4177,2021.8541,627.7811,2019.11,637.24" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[f9e653e105091eb90e2202d25ece7f2d]
@startuml
class BaseHTTPServer implements IHTTPServer{
    + const string VERSION
    + const string NAME
    + List<IResourceEndpointHandler> resourceEndpointHandlers
    - int port
    - bool running
    - ITcpListener listener
    

    + BaseHTTPServer(int port)
    - void Run()
}

class RequestContext{
    + EHTTPVerbs Type {get;set;}
    + String URL {get;set;}
    + String HTTPVersion {get;set;}
    + List<HttpHeaderPair> HeaderPairs {get;private set;}
    + String Body {get;set;}

    + void AddHeader(String headerLine)
    + static RequestContext GetBaseRequest(String request)
    + override string ToString()
    - RequestContext(String type, String url, String httpVersion)
}

class HttpHeaderPair{
    + String HeaderKey {get;set;}
    + String HeaderValue {get;set;}

    + HttpHeaderPair(String headerKey, String headerValue)
    + override string ToString()
}

interface IResourceEndpointHandler{
    + bool CheckResponsibility(RequestContext requestContext)
    + ResponseContext HandleRequest(RequestContext requestContext)
}

interface ICRUDHandler{
    + ResponseContext ListHandler(RequestContext requestContext)
    + ResponseContext CreateHandler(RequestContext requestContext)
    + ResponseContext ReadHandler(RequestContext requestContext)
    + ResponseContext UpdateHandler(RequestContext requestContext)
    + ResponseContext DeleteHandler(RequestContext requestContext)
}

class MessageResourceEndpointHandler implements IResourceEndpointHandler, ICRUDHandler{
    - List<Message> _messages
    - const String urlBase
    - List<RouteAction> RouteActions
    - int nextId;

    + MessageResourceEndpointHandler()
    - RouteAction DetermineRouteAction(RequestContext requestContext)
}
 class RouteAction{
     + String PathRegex {get;set;}
     + Func<RequestContext, ResponseContext> PathAction {get;set;}
     + EHTTPVerbs RequestType {get;set;}

     + RouteAction(Func<RequestContext, ResponseContext> pathAction, String pathRegex, EHTTPVerbs requestType)
 }

 class Message{
     + int Id {get;set;}
     + String Content {get;set;}
     + DateTime SentDate {get;set;}

     + override string ToString()
 }

class ResponseContext{
    + String HTTPVersion {get;set;}
    + String StatusMessage {get;set}
    + int StatusCode {get;set}
    + List<HttpHeaderPair> HeaderPairs {get;private set;}
    + String Content {get;private set;}

    + static ResponseContext OKResponse()
    + static ResponseContext CreatedResponse()
    + static ResponseContext NotFoundResponse()
    + static ResponseContext BadRequestResponse()
    + ResponseContext AddHeader(HttpHeaderPair httpHeaderPair)
    + ResponseContext SetContent(String content, String contentType)
    + override string ToString()
    - ResponseContext(String httpVersion, String statusMessage, int statusCode)
}

interface IHTTPServer{
    + void Start()
    + void HandleClient(ITcpClient tcpClient)
}


enum EHTTPVerbs{
    GET,
    HEAD,
    POST,
    DELETE,
    PUT,
    CONNECT,
    TRACE,
    PATCH,
    OPTIONS
}

interface ITcpClient implements IDisposable{
    + Stream GetStream()
    + void Close()
}

interface ITcpListener{
    + void Start()
    + void Stop()
    + TcpClient AcceptTcpClient()
}

class TcpClient implements ITcpClient{
    - readonly System.Net.Sockets.TcpClient _client

    + TcpClient()
    + TcpClient(System.Net.Sockets.TcpClient tcpClient)
}

class TcpListener implements ITcpListener{
    - readonly System.Net.Sockets.TcpListener _tcpListener;

    + TcpListener(IPAddress ipAddress, in port)
}


 BaseHTTPServer o- - IResourceEndpointHandler
 RequestContext o- - HttpHeaderPair
 MessageResourceEndpointHandler o- - RouteAction
 MessageResourceEndpointHandler o- -Message
 MessageResourceEndpointHandler ..> ResponseContext
 MessageResourceEndpointHandler ..> RequestContext
 ResponseContext o- - HttpHeaderPair
 BaseHTTPServer ..> ITcpClient
 BaseHTTPServer o- - ITcpListener
 ITcpListener ..> ITcpClient
@enduml

PlantUML version 1.2020.18(Wed Sep 30 21:40:44 CEST 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>